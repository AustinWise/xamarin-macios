# imports the xml to the vsts test results for the job
parameters:

- name: runTests
  type: boolean
  default: true

- name: devicePrefix
  type: string 
  default: 'ios' # default context, since we started dealing with iOS devices. 

steps:

- checkout: self
  persistCredentials: true

- template: download-artifacts.yml 
  enabled: ${{ parameters.runTests }} # no tests, nothing to download
  parameters:
    devicePrefix: ${{ parameters.devicePrefix }}

# Upload test results to vsts.
- task: PublishTestResults@2
  displayName: 'Publish NUnit Device Test Results'
  enabled: ${{ parameters.runTests }} # no tests, nothing to publish
  inputs:
    testResultsFormat: NUnit
    testResultsFiles: '**/vsts-*.xml'
    failTaskOnFailedTests: true
  continueOnError: true
  condition: succeededOrFailed()
